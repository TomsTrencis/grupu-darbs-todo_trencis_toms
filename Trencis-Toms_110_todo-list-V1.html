<!-- 
Autors: Toms Trencis
Grupa: 110
Versija: 1
-->

<!-- Kas ir localStorage pārlūkprogrammā?
    ATB: localStorage ir īpašība, kas ļauj JavaScript vietnēm un lietotnēm saglabāt atslēgu-vērtību pārus tīmekļa pārlūkprogrammā bez derīguma termiņa.
    
    Atšķirībā no mainīgajiem (let vai const), kuru vērtības pazūd pēc lapas pārlādes (F5), localStorage saglabā datus pārlūkprogrammā bez derīguma termiņa un 
    tie nepazūd pat pēc lapas pārlādes, pārlūka aizvēršanas vai atkārtotas atvēršanas. 
-->

<!DOCTYPE html>
<html lang="lv">
<head>
<title>Todo List</title>
<meta charset="UTF-8"> 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container d-flex justify-content-center align-items-center min-vh-100">
  <div class="shadow p-3 mb-5 bg-white rounded" style="width: 100rem; max-width: 750px;">
     <h3 class="text-center">Mani darbi</h3>
     
     <div class="input-group mb-3">
       <input id="taskInput" type="text" class="form-control" placeholder="Ieraksti darbu...">
       <button id="addButton" class="btn btn-primary">Pievienot</button>
     </div>

     <ul id="taskList" class="list-group mt-3"></ul>
 </div>
</div>

<script>
const input = document.getElementById("taskInput");
const button = document.getElementById("addButton");
const list = document.getElementById("taskList");

function saveTasks() {
    const tasks = [];

    document.querySelectorAll("#taskList li").forEach(li => {
        const span = li.querySelector("span");
        tasks.push({
            text: span.textContent,
            done: span.classList.contains("text-decoration-line-through")
        });
    });

    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function addTask(text, done = false) {
    const li = document.createElement("li");
    li.className = "list-group-item d-flex justify-content-between align-items-center";

    const span = document.createElement("span");
    span.textContent = text;
    span.style.cursor = "pointer";

    if (done) {
        span.classList.add("text-decoration-line-through");
    }

    span.onclick = function () {
        span.classList.toggle("text-decoration-line-through");
        saveTasks();
    };

    const deleteButton = document.createElement("button");
    deleteButton.className = "btn btn-danger btn-sm";
    deleteButton.textContent = "Dzēst";

    deleteButton.onclick = function (e) {
        e.stopPropagation(); 
        li.remove();
        saveTasks();
    };

    li.appendChild(span);
    li.appendChild(deleteButton);
    list.appendChild(li);

    saveTasks();
}

function loadTasks() {
    const tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    tasks.forEach(task => addTask(task.text, task.done));
}

button.onclick = function () {
    const text = input.value.trim();
    if (text === "") return;

    addTask(text);
    input.value = "";
};

loadTasks();
</script>

</body>
</html>
